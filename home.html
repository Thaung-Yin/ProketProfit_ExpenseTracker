<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Proket Profit</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="shortcut icon" href="./img/Track.svg" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="./css/homestyle.css">

    <style type="text/tailwindcss">
        @theme {
            --color-brand: #27386d;
            --color-brand-dark: #1a224c;
            --font-sans: 'Poppins', sans-serif;
            --font-heading: 'Outfit', sans-serif;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #27386d;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50 h-screen w-full flex text-gray-800 font-sans overflow-hidden">

    <div id="global-loader" class="fixed inset-0 z-[200] bg-white flex flex-col items-center justify-center">
        <div class="loader mb-4"></div>
        <p class="text-sm font-bold text-brand animate-pulse">Loading Proket...</p>
    </div>

    <aside class="bg-white w-72 shadow-xl flex-col z-30 hidden md:flex h-full border-r border-gray-100">
        <div class="h-24 flex items-center px-8 border-b border-gray-100 shrink-0">
             <div class="flex items-center">
                <img src="./img/Logo.png" alt="Logo" class="w-full h-14 object-contain">
            </div>
        </div>
        <nav class="flex-1 px-6 py-8 space-y-3 overflow-y-auto">
            <button onclick="router('dashboard')" id="nav-d-dashboard" class="nav-item w-full flex items-center gap-4 px-4 py-4 bg-brand text-white rounded-2xl shadow-lg transition group"><i class="fa-solid fa-chart-pie w-5 text-lg"></i><span class="font-medium">Dashboard</span></button>
            <button onclick="router('income')" id="nav-d-income" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-gray-500 hover:bg-blue-50 hover:text-brand rounded-2xl transition group"><i class="fa-solid fa-wallet w-5 text-lg"></i><span class="font-medium">Income</span></button>
            <button onclick="router('expense')" id="nav-d-expense" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-gray-500 hover:bg-blue-50 hover:text-brand rounded-2xl transition group"><i class="fa-solid fa-coins w-5 text-lg"></i><span class="font-medium">Expense</span></button>
            <button onclick="router('group')" id="nav-d-group" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-gray-500 hover:bg-blue-50 hover:text-brand rounded-2xl transition group"><i class="fa-solid fa-users w-5 text-lg"></i><span class="font-medium">Groups</span></button>
            <button onclick="router('reports')" id="nav-d-reports" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-gray-500 hover:bg-blue-50 hover:text-brand rounded-2xl transition group"><i class="fa-solid fa-chart-simple w-5 text-lg"></i><span class="font-medium">Reports</span></button>
            <button onclick="router('profile')" id="nav-d-profile" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-gray-500 hover:bg-blue-50 hover:text-brand rounded-2xl transition group"><i class="fa-solid fa-gear w-5 text-lg"></i><span class="font-medium">Settings</span></button>
        </nav>
        <div class="p-6 border-t border-gray-100 shrink-0">
            <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 rounded-2xl transition font-bold text-sm"><i class="fa-solid fa-arrow-right-from-bracket w-5 text-lg"></i> Log Out</button>
        </div>
    </aside>

    <div class="flex-1 flex flex-col h-screen overflow-hidden relative">
        <header class="h-20 bg-white/90 backdrop-blur-md shadow-sm flex items-center justify-between px-6 z-20 sticky top-0 border-b border-gray-100">
            <h2 id="page-title" class="text-2xl font-bold font-heading text-brandDark">Dashboard</h2>
            <div class="flex items-center gap-4">
                <div class="text-right hidden md:block">
                    <p class="text-sm font-bold text-gray-800" id="header-name">User</p>
                    <p class="text-xs text-gray-400">Pro Member</p>
                </div>
                <img id="header-avatar" src="" class="w-10 h-10 rounded-full bg-gray-200 border border-gray-300">
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-4 md:p-8 space-y-8 pb-24 md:pb-8">
            <div id="view-dashboard" class="view-section fade-in block space-y-6">
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                    <div class="flex justify-between items-center mb-3">
                        <div class="flex items-center gap-2">
                            <p class="text-gray-400 text-xs font-bold uppercase tracking-wider">Monthly Budget</p>
                            <button onclick="openBudgetModal('user')" class="w-6 h-6 rounded-full bg-gray-100 hover:bg-brand hover:text-white text-gray-400 flex items-center justify-center transition"><i class="fa-solid fa-pen text-[10px]"></i></button>
                        </div>
                        <span id="dash-budget-pct" class="text-xs font-bold text-gray-500">0%</span>
                    </div>
                    
                    <div class="flex justify-between items-end mb-2">
                        <h3 class="text-xl font-bold text-brandDark"><span id="dash-spent-month">0</span> <span class="text-sm text-gray-400 font-normal">spent of</span> <span id="dash-budget-limit">No Limit</span></h3>
                    </div>

                    <div class="w-full bg-gray-100 h-3 rounded-full overflow-hidden">
                        <div id="dash-budget-bar" class="bg-brand h-full rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex flex-col justify-center h-40">
                        <div class="flex items-center justify-between mb-2"><p class="text-gray-400 text-xs font-bold uppercase tracking-wider">Total Balance</p><div class="w-8 h-8 rounded-full bg-brand/10 text-brand flex items-center justify-center text-2xl"><i class="fa-solid fa-coins"></i></div></div>
                        <h3 class="text-3xl font-bold font-heading text-brandDark" id="dash-balance">0 MMK</h3>
                    </div>
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex items-center justify-between h-40">
                        <div><p class="text-gray-400 text-xs font-bold uppercase mb-1">Total Income</p><h3 class="text-2xl font-bold text-green-500" id="dash-income-card">0 MMK</h3></div>
                        <div class="w-12 h-12 bg-green-50 rounded-full flex items-center justify-center text-green-500"><i class="fa-solid fa-arrow-up text-xl"></i></div>
                    </div>
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex items-center justify-between h-40">
                        <div><p class="text-gray-400 text-xs font-bold uppercase mb-1">Total Expense</p><h3 class="text-2xl font-bold text-red-500" id="dash-expense-card">0 MMK</h3></div>
                        <div class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center text-red-500"><i class="fa-solid fa-arrow-down text-xl"></i></div>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100"><h3 class="font-bold text-brandDark mb-6">Expense Breakdown</h3><div class="h-64 relative w-full"><canvas id="mainChart"></canvas></div></div>
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 overflow-hidden flex flex-col"><h3 class="font-bold text-brandDark mb-4">My Groups</h3><div id="dash-groups-list" class="flex-1 overflow-y-auto space-y-2 max-h-56"></div></div>
                </div>
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100"><h3 class="font-bold text-brandDark mb-4">Recent Transactions</h3><div class="overflow-x-auto"><table class="w-full text-left text-sm"><thead class="bg-gray-50 text-gray-500 font-bold uppercase text-xs"><tr><th class="p-4 rounded-l-xl">Desc</th><th class="p-4">Category</th><th class="p-4">Date</th><th class="p-4 text-right rounded-r-xl">Amount</th></tr></thead><tbody id="dash-recent-table" class="divide-y divide-gray-50"></tbody></table></div></div>
            </div>

            <div id="view-income" class="view-section fade-in hidden space-y-6">
                <div class="bg-green-500 text-white p-8 rounded-3xl shadow-lg text-center"><p class="text-green-100 font-bold uppercase text-xs">Total Income</p><h2 class="text-4xl font-bold mt-2" id="income-total">0 MMK</h2></div>
                <div id="income-list" class="space-y-3"></div>
            </div>

            <div id="view-expense" class="view-section fade-in hidden space-y-6">
                <div class="bg-red-500 text-white p-8 rounded-3xl shadow-lg text-center"><p class="text-red-100 font-bold uppercase text-xs">Total Expense</p><h2 class="text-4xl font-bold mt-2" id="expense-total">0 MMK</h2></div>
                <div id="expense-list" class="space-y-3"></div>
            </div>

            <div id="view-group" class="view-section fade-in hidden space-y-6">
                <div id="group-list-view">
                    <div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold text-brandDark">My Groups</h2><button onclick="showCreateGroup()" class="bg-brand text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg"><i class="fa-solid fa-plus"></i> Create New</button></div>
                    <div id="groups-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </div>
                
                <div id="group-create-view" class="hidden max-w-md mx-auto bg-white p-8 rounded-3xl shadow-lg text-center">
                    <h2 class="text-xl font-bold mb-6 text-brandDark">Create New Group</h2>
                    <input type="text" id="new-group-name" placeholder="Group Name (e.g., Trip to Bagan)" class="glass-input mb-4">
                    <input type="number" id="new-group-budget" placeholder="Monthly Limit (Optional)" class="glass-input mb-4">
                    <div class="text-left space-y-3 mb-6">
                        <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition"><input type="checkbox" id="create-share-inc" class="w-5 h-5 text-brand rounded border-gray-300 focus:ring-brand"><span class="text-xs font-bold text-gray-600">Share Income</span></label>
                        <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition"><input type="checkbox" id="create-share-exp" checked class="w-5 h-5 text-brand rounded border-gray-300 focus:ring-brand"><span class="text-xs font-bold text-gray-600">Share Expense</span></label>
                    </div>
                    <div class="flex gap-3"><button onclick="cancelCreateGroup()" class="flex-1 py-3 bg-gray-100 rounded-xl text-gray-500 font-bold hover:bg-gray-200 transition">Cancel</button><button onclick="createGroup()" class="flex-1 py-3 bg-brand text-white font-bold rounded-xl shadow-lg hover:bg-brandDark transition">Create</button></div>
                </div>

                <div id="group-detail-view" class="hidden space-y-6 relative">
                    <button onclick="closeGroupDetail()" class="absolute top-4 left-4 z-10 bg-white/20 text-white p-2 rounded-lg backdrop-blur-md hover:bg-white/30 transition"><i class="fa-solid fa-arrow-left"></i> Back</button>
                    <div class="bg-brand text-white p-8 rounded-3xl shadow-lg relative overflow-hidden text-center pt-16">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl -mr-10 -mt-10"></div>
                        
                        <div class="flex items-center justify-center gap-3">
                            <h2 class="text-3xl font-bold" id="detail-group-name">Group</h2>
                            <button id="btn-rename-group" onclick="openRenameModal()" class="hidden w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 text-white flex items-center justify-center transition"><i class="fa-solid fa-pen text-sm"></i></button>
                        </div>
                        
                        <p class="text-xs text-brand-100 mt-1">ID: #<span id="detail-group-id"></span></p>
                        <div class="mt-8 flex justify-center gap-12"><div><p class="text-xs text-brand-100 uppercase mb-1">Total Income</p><p class="text-2xl font-bold text-green-300" id="detail-group-inc">0</p></div><div><p class="text-xs text-brand-100 uppercase mb-1">Total Expense</p><p class="text-2xl font-bold text-red-300" id="detail-group-exp">0</p></div></div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                        <div class="flex justify-between items-end mb-2">
                            <div class="flex items-center gap-2">
                                <span class="text-xs font-bold text-gray-400 uppercase">Group Budget</span>
                                <button id="btn-edit-group-budget" onclick="openBudgetModal('group')" class="hidden w-5 h-5 rounded-full bg-gray-100 hover:bg-brand hover:text-white text-gray-400 flex items-center justify-center transition"><i class="fa-solid fa-pen text-[9px]"></i></button>
                            </div>
                            <span id="group-budget-status" class="text-xs font-bold text-gray-600"></span>
                        </div>
                        <div class="w-full bg-gray-100 h-2 rounded-full overflow-hidden">
                            <div id="group-budget-bar" class="bg-blue-500 h-full rounded-full transition-all" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100"><h3 class="font-bold mb-4">Members</h3><div class="flex gap-2 mb-4"><input type="text" id="add-member-input" placeholder="Name or ID" class="glass-input py-2 text-sm"><button onclick="addMember()" class="bg-brand text-white px-4 rounded-xl font-bold text-xs shadow-md">Add</button></div><div id="detail-member-list" class="space-y-2"></div></div>
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100"><h3 class="font-bold mb-4">History</h3><div id="detail-tx-list" class="space-y-3 max-h-60 overflow-y-auto"></div></div>
                    </div>
                </div>
            </div>

            <div id="view-reports" class="view-section fade-in hidden space-y-6">
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"><h3 class="font-bold text-brandDark">Reports</h3><button onclick="downloadCSV()" class="bg-green-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-green-700 transition"><i class="fa-solid fa-file-excel"></i> Export</button></div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
                        <select id="filter-month" class="p-2 border border-gray-200 rounded-lg text-xs outline-none focus:border-brand bg-white">
                            <option value="all">All Months</option>
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        <select id="filter-category" class="p-2 border border-gray-200 rounded-lg text-xs outline-none focus:border-brand bg-white">
                            <option value="all">All Categories</option>
                        </select>
                        <select id="filter-type" class="p-2 border border-gray-200 rounded-lg text-xs outline-none focus:border-brand bg-white">
                            <option value="all">All Types</option>
                            <option value="income">Income</option>
                            <option value="expense">Expense</option>
                        </select>
                        <button onclick="applyFilters()" class="px-5 py-2 bg-brand text-white rounded-lg text-xs font-bold shadow-md hover:bg-brandDark transition">Apply Filters</button>
                    </div>

                    <div class="overflow-x-auto rounded-2xl border border-gray-100"><table class="w-full text-left text-sm"><thead class="bg-gray-50 text-gray-500 font-bold uppercase text-xs"><tr><th class="p-5">Date</th><th class="p-5">Type</th><th class="p-5">Details</th><th class="p-5 text-right">Amount</th></tr></thead><tbody id="report-table-body" class="divide-y divide-gray-50 bg-white"></tbody></table></div>
                </div>
            </div>

            <div id="view-profile" class="view-section fade-in hidden">
                <div class="bg-white max-w-lg mx-auto p-8 rounded-3xl shadow-sm border border-gray-100">
                    <div class="text-center">
                        <img id="profile-img-lg" src="" class="w-24 h-24 rounded-full border-4 border-white shadow-lg mx-auto">
                        <h2 class="text-2xl font-bold text-brandDark mt-4" id="profile-name">User</h2>
                        <p class="text-xs text-gray-400 mt-1">Manage your account</p>
                    </div>
                    
                    <div class="mt-8 space-y-4">
                        <div>
                            <label class="text-xs font-bold text-gray-500 uppercase ml-1">Full Name</label>
                            <input type="text" id="settings-fullname" class="glass-input">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-gray-500 uppercase ml-1">User ID</label>
                            <input type="text" id="settings-userid" disabled class="glass-input bg-gray-100 text-gray-500 cursor-not-allowed">
                        </div>
                        <button onclick="saveProfile()" class="w-full bg-brand text-white py-3 rounded-xl font-bold shadow-lg mt-2 hover:bg-brandDark transition">Update Profile Info</button>
                    </div>

                    <hr class="my-8 border-gray-100">

                    <div class="space-y-4">
                        <h3 class="font-bold text-brandDark text-lg">Security</h3>
                        <button id="btn-toggle-pw" onclick="togglePasswordForm()" class="w-full py-3 bg-gray-50 text-gray-700 font-bold rounded-xl border border-gray-100 flex items-center justify-between px-4 hover:bg-gray-100 transition shadow-sm">
                            <div class="flex items-center gap-3"><i class="fa-solid fa-lock text-brand"></i><span>Change Password</span></div><i class="fa-solid fa-chevron-right text-sm text-gray-400"></i>
                        </button>
                        <div id="password-form-container" class="hidden space-y-4 bg-gray-50 p-6 rounded-2xl border border-gray-100 animate-fade-in relative">
                            <button onclick="togglePasswordForm()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="fa-solid fa-times"></i></button>
                            <h4 class="font-bold text-sm text-gray-700 mb-2">Create New Password</h4>
                            <div><label class="text-xs font-bold text-gray-500 uppercase ml-1">Old Password</label><input type="password" id="old-password" class="glass-input bg-white" placeholder="Current password"></div>
                            <div><label class="text-xs font-bold text-gray-500 uppercase ml-1">New Password</label><input type="password" id="new-password" class="glass-input bg-white" placeholder="New password"></div>
                            <div><label class="text-xs font-bold text-gray-500 uppercase ml-1">Verify Password</label><input type="password" id="verify-password" class="glass-input bg-white" placeholder="Re-type new password"></div>
                            <div class="flex gap-3 pt-2"><button onclick="togglePasswordForm()" class="flex-1 py-3 bg-white border border-gray-200 text-gray-500 rounded-xl font-bold hover:bg-gray-50 transition">Cancel</button><button onclick="changeUserPassword()" class="flex-1 bg-brand text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brandDark transition">Update</button></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-menu" class="view-section fade-in hidden p-4">
                <h2 class="text-2xl font-bold text-brandDark mb-4">Menu</h2>
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="router('group')" class="p-4 bg-white rounded-2xl shadow-sm flex flex-col items-center justify-center gap-2"><i class="fa-solid fa-users text-2xl text-brand"></i><span class="font-bold text-sm">Groups</span></button>
                    <button onclick="router('reports')" class="p-4 bg-white rounded-2xl shadow-sm flex flex-col items-center justify-center gap-2"><i class="fa-solid fa-chart-simple text-2xl text-brand"></i><span class="font-bold text-sm">Reports</span></button>
                    <button onclick="router('profile')" class="p-4 bg-white rounded-2xl shadow-sm flex flex-col items-center justify-center gap-2"><i class="fa-solid fa-gear text-2xl text-brand"></i><span class="font-bold text-sm">Settings</span></button>
                    <button onclick="logout()" class="p-4 bg-red-50 rounded-2xl shadow-sm flex flex-col items-center justify-center gap-2"><i class="fa-solid fa-arrow-right-from-bracket text-2xl text-red-500"></i><span class="font-bold text-sm text-red-500">Log Out</span></button>
                </div>
            </div>
        </main>
    </div>

    <button onclick="openModal()" class="hidden md:flex fixed bottom-10 right-10 z-50 bg-brand text-white w-16 h-16 rounded-full shadow-2xl items-center justify-center text-3xl hover:scale-110 transition duration-200 border-4 border-white"><i class="fa-solid fa-plus"></i></button>

    <nav class="md:hidden fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 z-40 pb-safe shadow-[0_-5px_10px_rgba(0,0,0,0.02)]">
        <div class="grid grid-cols-5 items-center py-2">
            <button onclick="router('dashboard')" id="nav-m-dashboard" class="flex flex-col items-center p-2 text-brand"><i class="fa-solid fa-chart-pie text-xl mb-1"></i><span class="text-[10px] font-bold">Home</span></button>
            <button onclick="router('income')" id="nav-m-income" class="flex flex-col items-center p-2 text-gray-400"><i class="fa-solid fa-wallet text-xl mb-1"></i><span class="text-[10px] font-bold">Income</span></button>
            <div class="relative flex justify-center"><button onclick="openModal()" class="w-14 h-14 bg-brand rounded-full text-white shadow-xl shadow-brand/40 flex items-center justify-center text-2xl border-4 border-white -mt-8 hover:scale-105 transition"><i class="fa-solid fa-plus"></i></button></div>
            <button onclick="router('expense')" id="nav-m-expense" class="flex flex-col items-center p-2 text-gray-400"><i class="fa-solid fa-coins text-xl mb-1"></i><span class="text-[10px] font-bold">Expense</span></button>
            <button onclick="router('menu')" id="nav-m-menu" class="flex flex-col items-center p-2 text-gray-400"><i class="fa-solid fa-bars text-xl mb-1"></i><span class="text-[10px] font-bold">Menu</span></button>
        </div>
    </nav>

    <div id="modal-success" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white p-6 rounded-3xl shadow-2xl text-center scale-in max-w-sm w-full">
            <div class="w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"><i class="fa-solid fa-check"></i></div>
            <h3 class="text-xl font-bold text-gray-800 mb-1" id="success-title">Success!</h3>
            <button onclick="document.getElementById('modal-success').classList.add('hidden')" class="w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-bold mt-4 hover:bg-gray-200 transition">Okay</button>
        </div>
    </div>

    <div id="modal-alert" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white p-6 rounded-3xl shadow-2xl text-center scale-in max-w-sm w-full">
            <div class="w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"><i class="fa-solid fa-triangle-exclamation"></i></div>
            <h3 class="text-xl font-bold text-gray-800 mb-1">Attention</h3>
            <p id="alert-msg" class="text-gray-500 text-sm mb-4">Something went wrong.</p>
            <button onclick="document.getElementById('modal-alert').classList.add('hidden')" class="w-full bg-brand text-white py-3 rounded-xl font-bold hover:bg-brandDark transition">Okay</button>
        </div>
    </div>

    <div id="budget-modal" class="fixed inset-0 z-[110] hidden flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white p-6 rounded-3xl shadow-2xl text-center scale-in max-w-sm w-full">
            <h3 id="budget-modal-title" class="text-xl font-bold text-brandDark mb-4">Set Monthly Budget</h3>
            <div class="bg-gray-50 p-4 rounded-xl mb-4">
                <input type="number" id="inp-budget-edit" placeholder="Amount (e.g. 300000)" class="w-full bg-transparent text-center text-2xl font-bold outline-none text-gray-800 placeholder-gray-300">
                <p class="text-xs text-gray-400 mt-1">MMK / Month</p>
            </div>
            <div class="flex gap-3">
                <button onclick="closeBudgetModal()" class="flex-1 py-3 bg-gray-100 text-gray-500 rounded-xl font-bold hover:bg-gray-200 transition">Cancel</button>
                <button onclick="saveBudget()" class="flex-1 bg-brand text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brandDark transition">Save</button>
            </div>
        </div>
    </div>

    <div id="rename-modal" class="fixed inset-0 z-[110] hidden flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white p-6 rounded-3xl shadow-2xl text-center scale-in max-w-sm w-full">
            <h3 class="text-xl font-bold text-brandDark mb-4">Rename Group</h3>
            <div class="bg-gray-50 p-4 rounded-xl mb-4">
                <input type="text" id="inp-rename-group" placeholder="New Group Name" class="w-full bg-transparent text-center text-lg font-bold outline-none text-gray-800 placeholder-gray-300">
            </div>
            <div class="flex gap-3">
                <button onclick="closeRenameModal()" class="flex-1 py-3 bg-gray-100 text-gray-500 rounded-xl font-bold hover:bg-gray-200 transition">Cancel</button>
                <button onclick="saveGroupName()" class="flex-1 bg-brand text-white py-3 rounded-xl font-bold shadow-lg hover:bg-brandDark transition">Save</button>
            </div>
        </div>
    </div>

    <div id="tx-modal" class="fixed inset-0 z-[60] hidden flex items-end md:items-center justify-center bg-black/60 backdrop-blur-sm p-0 md:p-4">
        <div class="bg-white w-full md:w-auto md:min-w-[480px] max-w-lg rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[95vh] transform transition-transform slide-up">
            <div class="bg-gray-50 p-4 border-b border-gray-100 flex justify-between items-center shrink-0">
                <div class="bg-gray-200 p-1 rounded-xl flex w-64">
                    <button onclick="setTxType('expense')" id="btn-tx-expense" class="flex-1 py-2 rounded-lg bg-white shadow-sm text-brand font-bold text-xs transition-all">Expense</button>
                    <button onclick="setTxType('income')" id="btn-tx-income" class="flex-1 py-2 rounded-lg text-gray-500 font-bold text-xs transition-all">Income</button>
                </div>
                <button onclick="closeModal()" class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 hover:bg-gray-300 text-gray-600 transition"><i class="fa-solid fa-times"></i></button>
            </div>
            
            <div class="p-6 overflow-y-auto space-y-6">
                <div class="text-center">
                    <label class="text-xs font-bold text-gray-400 uppercase tracking-widest">Amount</label>
                    <div class="flex items-center justify-center gap-1"><input type="number" id="inp-amount" placeholder="0" class="w-full text-center text-5xl font-bold text-brandDark outline-none bg-transparent placeholder-gray-300"></div>
                    <span class="text-sm font-bold text-gray-400 mt-2 block">MMK</span>
                </div>
                
                <div id="category-section" class="transition-all">
                    <label class="text-xs font-bold text-gray-400 uppercase mb-3 block">Category</label>
                    <div class="grid grid-cols-4 gap-3" id="category-scroll">
                        </div>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-400 uppercase mb-3 block">Payment Method</label>
                    <div class="grid grid-cols-3 sm:grid-cols-4 gap-3 p-4 bg-gray-50 rounded-2xl" id="bank-scroll"></div>
                </div>
                
                <div id="group-option-container" class="hidden transition-all duration-300">
                    <div class="border border-gray-200 bg-brand/5 rounded-2xl p-4">
                        <label class="flex items-center gap-3 cursor-pointer mb-3"><input type="checkbox" id="inp-is-group" class="w-5 h-5 text-brand rounded border-gray-300 focus:ring-brand" onchange="toggleGroupSelect()"><span class="font-bold text-sm text-brandDark">Add to Group Record?</span></label>
                        <select id="inp-group-select" class="w-full p-3 bg-white border border-gray-200 rounded-xl text-sm font-medium outline-none focus:border-brand hidden animate-fade-in"></select>
                    </div>
                </div>
                
                <div><label class="text-xs font-bold text-gray-400 uppercase mb-2 block">Note</label><input type="text" id="inp-desc" placeholder="Details (e.g., Dinner, Taxi)" class="glass-input"></div>
            </div>
            
            <div class="p-4 border-t border-gray-100 shrink-0"><button onclick="saveTx()" class="w-full bg-brand text-white py-4 rounded-xl font-bold text-sm shadow-lg hover:bg-brandDark transition transform active:scale-95">Save Record</button></div>
        </div>
    </div>

    <script type="module" src="./js/home.js"></script>
</body>
</html>